<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="仅限学习参考，有兴趣可以互相交流">
  <meta name="author" content="张议">
  <meta name="keywords" content="张议,Java,java,spring,SpringBoot,zhangyi">
  <title>Oracle语法 ~ 人生展馆</title>

  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"  >
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"  >
<link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css"  >
<link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css"  >

<link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">



  <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"  >

<link rel="stylesheet" href="/css/main.css"  >


  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"  >


<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>人生展馆</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">主页</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">归档</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">分类</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">标签</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">资料</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2" id="background"
         style="background: url('/img/index.jpg')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              
                <p class="mt-3">
                  <i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp;
                  星期二, 一月 17日 2023, 11:00 上午
                </p>
              

              <p>
                
                  
                  &nbsp;<i class="far fa-chart-bar"></i>
                  <span class="post-count">
                    2.6k 字
                  </span>&nbsp;
                

                
                  
                  &nbsp;<i class="far fa-clock"></i>
                  <span class="post-count">
                      9 分钟
                  </span>&nbsp;
                

                
                  <!-- 不蒜子统计文章PV -->
                  
                  &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp;
                  <span id="busuanzi_container_page_pv">
                    <span id="busuanzi_value_page_pv"></span> 次
                  </span>&nbsp;
                
              </p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto" id="post">
          <div class="markdown-body">
            <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>　闪回技术是Oracle强大数据库备份恢复机制的一部分，在数据库发生逻辑错误的时候，闪回技术能提供快速且最小损失的恢复（多数闪回功能都能在数据库联机状态下完成）。<br>需要注意的是，闪回技术旨在快速恢复逻辑错误，对于物理损坏或是介质丢失的错误，闪回技术就回天乏术了，还是得借助于Oracle一些高级的备份恢复工具如RAMN去完成。</p>
</blockquote>
<h2 id="撤销段（UNDO-SEGMENT）"><a href="#撤销段（UNDO-SEGMENT）" class="headerlink" title="撤销段（UNDO SEGMENT）"></a>撤销段（UNDO SEGMENT）</h2><blockquote>
<p>在讲闪回技术前，需要先了解Oracle中一个逻辑结构–撤销段。<br>因为大部分闪回技术都需要依赖撤销段中的撤销数据。撤销数据是反转DML语句结果所需的信息，只要某个事务修改了数据，那么更新前的原有数据就会被写入一个撤销段。<br>（事务回滚也会用到撤销段中的数据）。事务启动时，Oracle 会为其分配一个撤销段，事务和撤销段存在多对一的关系，即一个事务只能对应一个撤销段，<br>多个事务可以共享一个撤销段（不过在数据库正常运行时一般不会发生这种情况）。</p>
</blockquote>
<h2 id="闪回技术"><a href="#闪回技术" class="headerlink" title="闪回技术"></a>闪回技术</h2><blockquote>
<p>Oracle提供了四种可供使用的闪回技术（闪回查询，闪回删除，闪回归档，闪回数据库），每种都有不同的底层体系结构支撑，但其实这四种不同的闪回技术部分功能是有重叠的，使用时也需要根据实际场景合理选择最合适的闪回功能。</p>
</blockquote>
<h3 id="开启闪回功能-flashback"><a href="#开启闪回功能-flashback" class="headerlink" title="开启闪回功能(flashback)"></a>开启闪回功能(flashback)</h3><ol>
<li>打开flashback：关闭数据库<code>SQL&gt;shutdown immediate;</code></li>
<li>启动到mount方式<code>SQL&gt;startup mount;</code></li>
<li>如果归档没有打开，打开归档[因为flashback依赖Media recovery,所以在打开flashback之前必须先启用归档]<code>SQL&gt;alter database archivelog;</code></li>
<li>打开闪回<code>SQL&gt; alter database flashback on;</code></li>
</ol>
<h3 id="关闭闪回功能-flashback"><a href="#关闭闪回功能-flashback" class="headerlink" title="关闭闪回功能(flashback)"></a>关闭闪回功能(flashback)</h3><ol>
<li>关闭数据库：<code>SQL&gt;shutdown immediate</code></li>
<li>启动到mount方式<code>SQL&gt;startup mount;</code></li>
<li>关闭闪回<code>SQL&gt; alter database flashback off;</code></li>
</ol>
<h3 id="查看归档与闪回是否打开"><a href="#查看归档与闪回是否打开" class="headerlink" title="查看归档与闪回是否打开"></a>查看归档与闪回是否打开</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> flashback_on, force_logging, log_mode</span><br><span class="line"><span class="keyword">FROM</span> v$database;</span><br></pre></td></tr></table></figure>

<h3 id="闪回查询-Flashback-Query"><a href="#闪回查询-Flashback-Query" class="headerlink" title="闪回查询(Flashback Query)"></a>闪回查询(Flashback Query)</h3><h4 id="基本闪回查询"><a href="#基本闪回查询" class="headerlink" title="基本闪回查询"></a>基本闪回查询</h4><p>功能描述：可以查询过去某个时间段的数据库状态。</p>
<p>工作原理：Oracle 会提取所需要的撤销数据（前提是撤销是可用的，即撤销数据还没被覆盖）进行回滚，但这种回滚是临时的，仅针对当前session可见。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>  dept <span class="keyword">as</span> <span class="keyword">of</span> <span class="type">timestamp</span> to_timestamp(<span class="string">&#x27;2016-09-10 11:00:00&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd hh24:mi:ss&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="闪回表"><a href="#闪回表" class="headerlink" title="闪回表"></a>闪回表</h4><p>功能描述：可将某个表回退到过去某个时间点。</p>
<p>工作原理：同样，Oracle会先去查询撤销段，提取过去某个时间点之后的所有变更，构造反转这些变更的SQL语句进行回退,闪回操作是一个单独的事务，所以若由于撤销数据过期之类的原因导致无法闪回，整个操作会回滚，不会存在不一致的状态。</p>
<p>步骤：</p>
<ol>
<li>启用表闪回首先要在表上支持行移动（在数据字典中设置标识来标识该操作可能会改变行ID，即同一条数据闪回成功后主键都一样，但行ID其实已经发生变化了）　<code>alter table emp enable row movement;</code></li>
<li>闪回表操作</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flashback <span class="keyword">table</span> dept <span class="keyword">to</span> <span class="type">timestamp</span> to_timestamp(<span class="string">&#x27;2016-09-10 11:00:00&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd hh24:mi:ss&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>闪回表可能会失败，有可能有以下几种情况：</p>
<ol>
<li>违反了数据库约束，比如用户不小心删除了子表中的数据，现在想利用闪回表技术进行回退，恰好在这中间，父表中与该数据对应的那条记录也被删除了，在这种情况下，由于违反了外键约束，导致闪回表操作失败了；</li>
<li>撤销数据失效，比如用于支撑闪回操作的撤销数据被覆盖了，这种情况闪回表操作自然会失败；</li>
<li>闪回不能跨越DDL，即在闪回点和当前点之间，表结构有过变更，这种情况闪回操作也会失败。</li>
<li>注意：上述闪回功能都是基于撤销数据的，而撤销数据是会被重写的（Expired会被重写，Active不会被重写）；<br>所以，在需要使用这几种闪回功能去恢复数据的时候（确切地说，是需要使用基于撤销数据的闪回功能时），<br>最短时间发现错误，第一时间执行闪回操作，才能最大程度地保证闪回功能的成功。</li>
</ol>
<h3 id="闪回删除（Flashback-Drop）"><a href="#闪回删除（Flashback-Drop）" class="headerlink" title="闪回删除（Flashback Drop）"></a>闪回删除（Flashback Drop）</h3><p>功能描述：闪回删除可以轻松将一个已经被Drop的表还原回来。相应的索引，数据库约束也会被还原（除了外键约束）。</p>
<p>原理描述：Drop命令其实是Rename命令，早期的Oracle版本（10g之前），闪回删除意味着从数据字典中删除了该表的所有引用，<br>虽然表中数据可能还存在，但已成了孤魂野鬼，没法进行恢复了，10g版本之后，Drop命令则仅仅是一个Rename操作，所以恢复就很容易了。</p>
<p>闪回删除操作执行命令很简单</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flashback <span class="keyword">table</span> emp <span class="keyword">to</span> before</span><br></pre></td></tr></table></figure>

<p>如果要还原的表名在当前系统中已经被占用，也可以在闪回删除的时候对表重命名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flashback <span class="keyword">table</span> emp <span class="keyword">to</span> before <span class="keyword">drop</span> rename <span class="keyword">to</span> emp_new</span><br></pre></td></tr></table></figure>

<p>也可以通过回收站查看当前用户那些表被删除了，每个用户都有一个回收站，这个回收站是个逻辑结构，<br>它不是一块独立的存储空间，它存在在当前表空间内，所以如果有别的操作需要空间，比如现在需要创建一张表，<br>没有足够空间可用，回收站中的数据就会被清理，这也是导致闪回删除失败的原因。<br>彻底删除表，闪回删除也无能为力</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> EMP PURGE;</span><br></pre></td></tr></table></figure>

<p>清空回收站<br><code>PURGE RECYCLEBIN;</code><br>注意：闪回删除只针对Drop命令，注意区分truncate操作和drop操作，truncate称为表截断，会清空表中数据（调节Oracle高水位线实现），<br>表结构不受影响，速度很快，弊端是此过程不会产生任何撤销数据或是重做日志，如果误删，恢复异常麻烦，要慎重使用。<br>而Drop则会删除数据+表结构，闪回删除仅针对Drop操作。</p>
<h3 id="闪回数据归档（Flashback-Data-Archive）"><a href="#闪回数据归档（Flashback-Data-Archive）" class="headerlink" title="闪回数据归档（Flashback Data Archive）"></a>闪回数据归档（Flashback Data Archive）</h3><p>功能描述：闪回数据归档可使表具有回退到过去任何时间点的能力，前面提到的闪回查询，闪回表都会受限于撤销数据是否失效，如果撤销数据被覆盖重写了，闪回操作自然会失败，闪回删除则受限于表空间是否有足够可用空间，而闪回数据归档，则没有这些限制。</p>
<p>创建闪回归档</p>
<p>1.创建一个用户闪回数据归档的表空间，当然，也可以使用已经存在的表空间。<br><code>create tablespace test_tb datafile &#39;test.dbf&#39; size 20m;</code></p>
<p>2.创建一个保留时间为2年的闪回归档<br><code>create flashback archive test_fa tablespace test_tb retention 2 year;</code><br>为scott用户下的emp表启用闪回归档</p>
<p>以下语句创建一个闪回存档以进行测试。第一个被指定为数据库的默认值。对于它们，空间配额为 1 MB，存档保留时间为一天。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> FLASHBACK ARCHIVE <span class="keyword">DEFAULT</span> test_archive1</span><br><span class="line">   TABLESPACE example</span><br><span class="line">   QUOTA <span class="number">1</span> M</span><br><span class="line">   RETENTION <span class="number">1</span> <span class="keyword">DAY</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> database datafile <span class="string">&#x27;/u01/app/oracle/oradata/sktest/skuser.dbf&#x27;</span> autoextend <span class="keyword">on</span>;</span><br><span class="line">开启表空间自动扩展功能</span><br><span class="line"><span class="keyword">alter</span> database datafile <span class="string">&#x27;/u01/app/oracle/oradata/sktest/skuser.dbf&#x27;</span> autoextend off;</span><br><span class="line">关闭表空间自动扩展功能</span><br></pre></td></tr></table></figure>

<p>1.赋予用户归档的权限<br><code>grant flashback archive on test_fa to scott;</code></p>
<p>2.连接用户<br><code>conn scott/tiger;</code></p>
<p>3.为emp表启用闪回归档<br><code>alter table emp flashback archive test_fa;</code></p>
<p>至此，emp表就拥有了可以查询或回退到过去2年任意时间点的能力！</p>
<h3 id="闪回数据库（Flashback-Database）"><a href="#闪回数据库（Flashback-Database）" class="headerlink" title="闪回数据库（Flashback Database）"></a>闪回数据库（Flashback Database）</h3><p>功能描述：闪回数据库可将整个数据库回退到过去某个时间点，闪回表是某张表的时空穿梭，闪回数据库则是整个数据库的时空穿梭。<br>当然，闪回点之后的所有工作就丢失了，其实就相当于数据库的不完整恢复，所以只能以resetlogs模式打开数据库。<br>闪回数据库会造成停机时间，当然相比于传统备份恢复机制，恢复过程会快很多。</p>
<p>工作原理：闪回数据库不使用撤销数据，使用另外一种机制来保留回退所需要的恢复数据，当启用闪回数据库，发生变化的数据块会不断从数据库缓冲区缓存中复制到闪回缓冲区，<br>然后，称为恢复写入器（Recovery Writer）的后台进程会将这些数据刷新到磁盘中的闪回日志文件中。闪回的过程，则是一个 提取闪回日志–&gt;将块映像复制回数据文件 的过程。</p>
<p>配置闪回数据库（闪回数据库要求数据库为归档模式）</p>
<ol>
<li>指定闪回恢复区，也就是存放闪回日志的位置，但闪回恢复区不仅仅是为了存放闪回日志，Oracle的很多备份恢复技术都用到这个区域，比如控制文件的自动备份等都会存放到此区域。<br><code>alter system set db_recovery_file_dest =&#39;/flash_recovery_area&#39;;</code></li>
<li>指定恢复区大小<br><code>SQL&gt; alter system set db_recovery_file_dest_size=4G;</code></li>
<li>指定闪回日志保留时间为2小时，即通过闪回操作，可以将数据库回退到前两小时内的任意时间点<br><code>SQL&gt; alter system set db_flashback_retention_target=120;</code></li>
<li>有序关闭数据库–mount模式下启用闪回数据库–打开数据库</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> shutdown immediate;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> startup mount;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> database flashback <span class="keyword">on</span>;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> database <span class="keyword">open</span>;</span><br><span class="line">至此，闪回数据库配置完成！</span><br><span class="line">使用闪回数据库功能</span><br><span class="line">复制代码</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> shutdown immediate;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> startup mount;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> flashback database <span class="keyword">to</span> <span class="type">timestamp</span> sysdate<span class="number">-60</span><span class="operator">/</span><span class="number">1440</span>;</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">alter</span> database <span class="keyword">open</span> resetlogs;</span><br></pre></td></tr></table></figure>

            <hr>
          </div>
          <br>
          <div>
            <p>
            
              <span>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/Oracle">Oracle</a>
                  &nbsp;
                
              </span>&nbsp;&nbsp;
            
            
              <span>
                <i class="iconfont icon-tag"></i>
                
                  <a class="hover-with-bg" href="/tags/Oracle">Oracle</a>
                
              </span>
            
            </p>
            
              <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
      <br><br>
      
      

    
  </div>
</div>

    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>

    
  
    <!-- 不蒜子统计PV -->
    
    &nbsp;<span id="busuanzi_container_site_pv">总访问量 
          <span id="busuanzi_value_site_pv"></span> 次</span>&nbsp;
  
  
    <!-- 不蒜子统计UV -->
    
    &nbsp;<span id="busuanzi_container_site_uv">总访客数 
            <span id="busuanzi_value_site_uv"></span> 人</span>&nbsp;
  
  <br>



    

  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>


  <script src="/js/lazyload.js" ></script>



  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>



  <script src="/lib/smooth-scroll/smooth-scroll.min.js" ></script>



  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


<!-- Plugins -->


  

  

  

  

  




  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint  linenums');
      prettyPrint();
    })
  </script>



  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "Oracle语法&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "left",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>



  <script src="/lib/fancybox/jquery.fancybox.min.js" ></script>
  <script>
    $("#post img:not(.no-zoom img, img[no-zoom])").each(
      function () {
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "images");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      }
    );
  </script>







</body>
</html>
